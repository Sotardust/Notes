### 概述
虚拟机把描述类的数据从Class文件加载到内存，并对数据进行校验、转换解析和初始化，最终形成
可以被虚拟机直接是用的java类型，这就是虚拟机的类加载机制。

##### 类加载的时机
类从被加载到虚拟机内存中开始，到卸载出内存为止，它的生命周期包括：
> 加载（Loading） -> 验证（Verification）->
> 准备（Preparation）->解析（Resolution）->初始化（Initialization）->使用（Using）->卸载（Unloading）


其中 验证、准备、解析3部分为统称为连接（Linking）。

###### 加载
1. 通过一个类的全限定名来获取定义此类的二进制字节流
2. 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构
3. 在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据访问入口
###### 验证
验证是连接阶段的第一步，这一阶段的目的是为了确保Class文件的字节流中包含的信息符合当前虚拟机的要求，
并 且不会危害虚拟机自身的安全。 

4个阶段的检验动作：文件格式验证、元数据验证、字节码验证、符号引用验证。

###### 准备
准备阶段是正式为类变量分配内存并设置类变量初始值的阶段。这些变量是用的内存都将在方法区中进行分配。
进行内存分配的仅包括类变量（被static修饰的变量）,而不包括实例变量，实例变量将会在对象实例化时随着对象一起分配在Java堆中。

###### 解析
解析阶段是虚拟机将常量池内的符号引用替换为直接引用的过程。

解析动作主要针对类或者接口、字段、类方法、接口方法、方法类型、方法句柄、和调用点限定符7类符号医用调用

###### 初始化
类初始化阶段是类加载过程的最后一步，前面的类加载过程中除了加载阶段用户应用程序可以通过自定义类加载器参与之外
，其余动作完全有虚拟机主导和控制
。到了初始化阶段才是真正开始执行类中定义的java程序代码（或者说是字节码）。


#### 类加载器
通过一个类的全限定名来获取描述此类的二进制字节流，这个动作放到Java虚拟机外部实现，以便让引用程序自己决定如何去获取所需要的类，
实现这个动作的代码模块称为“类加载器”


#### 双亲委派模型

从Java虚拟机的角度来讲，只存在两种不同的类加载器：一种是启动类加载器（Bootstrap
ClassLoader
），这个类加载器使用C++语言实现，是虚拟机的一部分；另一种就是所有其他的类加载器，这些类加载器都是由Java语言独立于虚拟机外部
并且全部都继承自抽象类java.lang.ClassLoader。

###### 3中系统提供的类加载器 
1. 启动类加载器(Bootstrap ClassLoader)

2. 扩展类加载器（Extension ClassLoader）

3. 应用程序类加载器（Application ClassLoader） 一般也称为系统类加载器


双亲委派模型: 除了顶层的启动类加载器外，其余的类都应当有自己的父类加载器。这里加载器之间的父子关系一般
不会以继承（Inheritance）的关系来实现，而是都是用组合（Composition）关系来复用父加载器的代码。